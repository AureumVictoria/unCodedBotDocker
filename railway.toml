# railway.toml
# Richtige Konfiguration für den automatisierten Deploy von GitHub.
# Railway liest diese Datei und baut die Dockerfiles direkt aus diesem Repository.
# Docker Hub wird hierfür NICHT verwendet.

# Globale Build-Einstellungen
[build]
# Wir weisen Railway an, die Dockerfiles in den jeweiligen Ordnern zu verwenden.
builder = "DOCKER"

# Globale Deployment-Einstellungen
[deploy]
# Startet Dienste bei einem Fehler automatisch neu.
restartPolicy = "ON_FAILURE"
# Versucht den Neustart bis zu 10 Mal.
restartPolicyMaxRetries = 10

# --- Definition des Trading-Bot-Dienstes ---
# Railway erstellt einen Dienst namens "trading-bot".
# Das Image wird aus dem Dockerfile in "./trading-bot/" gebaut.
[[services]]
name = "trading-bot"
dockerfilePath = "./trading-bot/Dockerfile"
# Der Startbefehl (CMD) wird direkt aus deinem Dockerfile übernommen.

# --- Definition des Telegram-Bot-Dienstes ---
# Railway erstellt einen zweiten Dienst namens "telegram-bot".
# Das Image wird aus dem Dockerfile in "./telegram-bot/" gebaut.
[[services]]
name = "telegram-bot"
dockerfilePath = "./telegram-bot/Dockerfile"
# Auch hier wird der Startbefehl (CMD) aus dem Dockerfile verwendet.

# --- Definition des Datenbank-Dienstes ---
# Dies ist der empfohlene und korrekte Weg, eine Datenbank auf Railway zu erstellen.
# Railway stellt einen optimierten, verwalteten PostgreSQL-Dienst bereit.
[plugins.postgres]